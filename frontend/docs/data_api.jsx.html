<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: data/api.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: data/api.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Import different models
import userDataModel from "./models/userDataModel";
import activityDataModel from "./models/activityDataModel";
import sessionDataModel from "./models/sessionDataModel";
import performanceDataModel from "./models/performanceDataModel";

/**
 * It returns the data fetched from the API.
 * @param {string} userID Id of the user we fetch the data.
 * @param {string} endpoint Endpoint of the API route used to fetch specific data.
 * @return {Object} Fetched data.
 */
async function fetchApiData(userID, endpoint) {
    const domain = "http://localhost:";
    const port = "3000";
    const urlApi = domain + port + "/user/" + userID + "/" + endpoint;

    const request = await fetch(urlApi)
        .then((response) => response.json())
        .catch((err) => {
            console.log(err.message);
        });

    // Using an object by creating a new instance of the models to standardize the API response.
    const routes = {
        "": new userDataModel(
            request.data.id,
            request.data.userInfos,
            request.data.todayScore || request.data.score,
            request.data.keyData
        ),
        activity: new activityDataModel(request.data.userId, request.data.sessions),
        "average-sessions": new sessionDataModel(request.data.userId, request.data.sessions),
        performance: new performanceDataModel(request.data.userId, request.data.kind, request.data.data),
    };

    return routes[endpoint];
}

export default fetchApiData;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Aside">Aside</a></li><li><a href="global.html#Card">Card</a></li><li><a href="global.html#Dashboard">Dashboard</a></li><li><a href="global.html#displayBarChart">displayBarChart</a></li><li><a href="global.html#displayLineChart">displayLineChart</a></li><li><a href="global.html#displayRadarChart">displayRadarChart</a></li><li><a href="global.html#displayRadialBarChart">displayRadialBarChart</a></li><li><a href="global.html#Error">Error</a></li><li><a href="global.html#fetchApiData">fetchApiData</a></li><li><a href="global.html#Header">Header</a></li><li><a href="global.html#User">User</a></li><li><a href="global.html#UserHome">UserHome</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Tue Oct 25 2022 15:53:50 GMT+0200 (heure d’été d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
